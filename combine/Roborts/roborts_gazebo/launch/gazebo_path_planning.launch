<launch>
  <arg name="map" default="icra2019"/>
  
  <master auto="start"/>
  <param name="/use_sim_time" value="true"/>

  <!-- Run the Gazebo Simulator -->
  <include file="$(find roborts_gazebo)/launch/model_robomaster_world.launch"/>

  <!--Load parameters for localization node  -->
  <rosparam command="load" file="$(find roborts_localization)/config/robomaster_localization.yaml" />
  <rosparam command="load" file="$(find roborts_localization)/amcl/config/amcl.yaml" />

  <param name="initial_pose_x" value="0.5" />
  <param name="initial_pose_y" value="0.6" />
  <param name="initial_pose_a" value="0.0" />

  <!--<param name="base_frame" value="roborts_red_0/base_link"/>-->

  <!-- Run the map server -->
  <node name="map_server" pkg="map_server" type="map_server" args="$(find roborts_bringup)/maps/$(arg map).yaml" respawn="false" />

  <!-- Run the localization node -->
  <node pkg="roborts_localization" type="localization_node" name="localization_node" respawn="false" />

  <node pkg="roborts_planning" type="global_planner_node" name="global_planner_node" respawn="false" /> 

  <node pkg="roborts_planning" type="local_planner_node" name="local_planner_node" respawn="false" /> 

  <node pkg="roborts_planning" type="vel_converter" name="vel_converter_node" respawn="false" /> 

  <!--<include file="$(find roborts_navigation)/launch/move_base.launch"/> -->

  <!-- Run the rviz -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find roborts_gazebo)/rviz/path_planning.rviz" />
  <!--<node name="rviz" pkg="rviz" type="rviz" />-->


</launch>